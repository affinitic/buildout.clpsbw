<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<head>
    <metal:noborder fill-slot="top_slot"
                 tal:define="dummy python:request.set('disable_border',1)" />
</head>

<body>
<div metal:fill-slot="main">
   <h1>Gestion des ressources</h1>

    <div tal:define="ressources python:view.getAllRessource();">
        <tal:boucle tal:repeat="ressource ressources">
            <tal:block tal:define="ressourcePk ressource/ressource_pk;
                                   publics python:view.getPublicByRessourcePk(ressourcePk, 'nom');">
                <div class="formulaire">
                    <h2>
                        <a href=""
                         tal:content="ressource/ressource_titre"
                         tal:attributes="href string:decrire-une-ressource?ressourcePk=${ressourcePk}"
                         class="titre_formation">titre de la ressource</a>
                    </h2>
                    <div class="description-listing">
                            <h3>Description</h3>
                            <p><span tal:replace="structure ressource/ressource_description" /></p>
                            
                            <h3>Auteur</h3>
                            <p><span tal:content="ressource/ressource_auteur" /></p>
                            
                            <h3>Année de parution</h3>
                            <p><span tal:content="ressource/ressource_date_edition" /></p>
                            
                            <h3>Public</h3>
                            <p>
                            <tal:boucle tal:repeat="public publics">
                                <span tal:content="public" /><br />
                            </tal:boucle>
                            </p>
                    </div>
                    <hr class="ligne-top-menu-gestion-donnee" />
                    <div class="zone-menu-gestion">
                        <div class="experience-etat"
                             tal:define="ressourceEtat python:view.getRessourceEtat(ressourcePk)"
                             tal:condition="python:user.has_role(['Manager'], here)">
                            <span tal:content="ressourceEtat" />
                            &Xi;
                            <span tal:content="ressource/ressource_pk" />
                        </div>
                        <ul id="menu-gestion-donnee">
                            <li>
                                <a href=""
                                   tal:attributes="href string:${context/portal_url}/gestion-de-la-base/les-ressources/admin-chercher-une-ressource">
                                    Chercher</a>
                            </li>
                            <li>
                                <a href=""
                                   tal:attributes="href string:${context/portal_url}/gestion-de-la-base/les-ressources/admin-modifier-une-ressource}">
                                    Modifier</a>
                            </li>
                            <li>
                                <a href=""
                                   tal:attributes="href string:decrire-une-ressource?ressourcePk=${ressourcePk}">
                                   Détailler</a>
                            </li>
                        </ul>
                        <div class="visualClear" />
                    </div>
                </div>
            </tal:block>
        </tal:boucle>
    </div><!--define-->
</div><!--metal-->
</body>
</html>

